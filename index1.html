<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Duty Management Mobile</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#3498db">
    
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f7fa;
            color: #333;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        /* Mobile App Container */
        .app-container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* App Header */
        .app-header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .app-logo {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3498db;
            font-weight: bold;
            font-size: 20px;
        }

        .app-title h1 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .app-title p {
            font-size: 12px;
            opacity: 0.8;
        }

        .header-right {
            display: flex;
            gap: 10px;
        }

        .header-icon {
            width: 36px;
            height: 36px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
        }

        /* Tab Bar */
        .tab-bar {
            display: flex;
            background: white;
            border-top: 1px solid #e0e6ed;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 500px;
            margin: 0 auto;
            z-index: 1000;
        }

        .tab-item {
            flex: 1;
            padding: 12px 5px;
            text-align: center;
            font-size: 12px;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            background: none;
        }

        .tab-item.active {
            color: #3498db;
        }

        .tab-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        /* Main Content */
        .main-content {
            padding: 15px;
            padding-bottom: 70px; /* Space for tab bar */
            min-height: calc(100vh - 70px - 70px); /* Minus header and tab bar */
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .login-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo .app-logo {
            margin: 0 auto 15px;
            width: 70px;
            height: 70px;
            font-size: 28px;
        }

        .login-logo h1 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 5px;
        }

        .login-logo p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #2c3e50;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e6ed;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .error-message {
            background: #ffeaea;
            color: #e74c3c;
            padding: 12px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            display: none;
        }

        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .dashboard-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #e0e6ed;
        }

        .dashboard-card h3 {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .dashboard-value {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
        }

        .dashboard-subtitle {
            font-size: 12px;
            color: #95a5a6;
            margin-top: 5px;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }

        .action-icon {
            font-size: 24px;
            color: #3498db;
        }

        .action-text {
            font-size: 12px;
            font-weight: 500;
            color: #2c3e50;
            text-align: center;
        }

        /* Announcements */
        .announcements {
            margin-bottom: 20px;
        }

        .announcement-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .announcement-card.priority-high {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 87, 108, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(245, 87, 108, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 87, 108, 0); }
        }

        .announcement-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .announcement-content {
            font-size: 14px;
            opacity: 0.95;
            margin-bottom: 10px;
        }

        .announcement-time {
            font-size: 11px;
            opacity: 0.8;
        }

        /* Forms */
        .form-screen {
            max-width: 100%;
            overflow-x: hidden;
        }

        .form-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .form-card h2 {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .form-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group-inline {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        textarea.form-input {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        select.form-input {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            padding-right: 40px;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 15px;
            border: 1px solid #e0e6ed;
            border-radius: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            min-width: 300px;
        }

        th, td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #e0e6ed;
            font-size: 13px;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Status Badges */
        .status-badge {
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .action-btn-small {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn-small.approve {
            background: #d4edda;
            color: #155724;
        }

        .action-btn-small.reject {
            background: #f8d7da;
            color: #721c24;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Alerts */
        .alert {
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid;
            font-size: 14px;
        }

        .alert-info {
            background: #e8f4fc;
            border-color: #3498db;
            color: #2c3e50;
        }

        .alert-success {
            background: #d4edda;
            border-color: #27ae60;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #f39c12;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #e74c3c;
            color: #721c24;
        }

        /* Offline Indicator */
        .offline-indicator {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            max-width: 500px;
            margin: 0 auto;
            background: #e74c3c;
            color: white;
            padding: 10px 15px;
            font-size: 14px;
            text-align: center;
            z-index: 999;
            display: none;
        }

        /* Swipe Navigation */
        .swipe-area {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 20px;
            z-index: 10;
        }

        .swipe-area.left {
            left: 0;
        }

        .swipe-area.right {
            right: 0;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }

        /* Touch Feedback */
        .touch-feedback {
            transition: transform 0.1s;
        }

        .touch-feedback:active {
            transform: scale(0.98);
        }

        /* No Data */
        .no-data {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
            font-size: 16px;
        }

        .no-data-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-10 {
            margin-top: 10px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 360px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 10px;
            }
        }

        /* High DPI Screens */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .form-input {
                border-width: 1px;
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            body {
                background: #1a1a1a;
                color: #fff;
            }
            
            .app-container {
                background: #2c2c2c;
            }
            
            .dashboard-card {
                background: #3c3c3c;
                border-color: #444;
            }
            
            .form-input {
                background: #3c3c3c;
                border-color: #444;
                color: #fff;
            }
            
            .table-container {
                border-color: #444;
            }
            
            th {
                background: #444;
            }
        }
    </style>
</head>
<body>
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        ‚ö†Ô∏è You are currently offline. Changes will sync when you reconnect.
    </div>

    <!-- App Container -->
    <div class="app-container" id="appContainer">
        <!-- Login Screen -->
        <div id="loginScreen" class="login-screen">
            <div class="login-card">
                <div class="login-logo">
                    <div class="app-logo">DM</div>
                    <h1>Duty Management</h1>
                    <p>Mobile App Version</p>
                </div>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" id="username" class="form-input" 
                               placeholder="Enter username" required autocomplete="username">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="password" class="form-input" 
                               placeholder="Enter password" required autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="loginBtn">
                        <span>Login</span>
                    </button>
                    
                    <div class="error-message" id="errorMessage">
                        Invalid username or password
                    </div>
                    
                    <div class="alert alert-info mt-20">
                        <strong>Demo Mode:</strong> Using local storage. 
                        Save this page to home screen for app experience.
                    </div>
                </form>
            </div>
        </div>

        <!-- Main App (Hidden Initially) -->
        <div id="mainApp" class="hidden">
            <!-- App Header -->
            <div class="app-header">
                <div class="header-content">
                    <div class="header-left">
                        <div class="app-logo">DM</div>
                        <div class="app-title">
                            <h1 id="headerTitle">Dashboard</h1>
                            <p id="headerSubtitle">Welcome back</p>
                        </div>
                    </div>
                    <div class="header-right">
                        <div class="header-icon" id="notificationsBtn" title="Notifications">
                            üîî <span id="notificationCount" class="hidden"></span>
                        </div>
                        <div class="header-icon" id="refreshBtn" title="Refresh">
                            ‚Üª
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content" id="mainContent">
                <!-- Dashboard Content -->
                <div id="dashboardContent" class="page-content">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h3>Sick Leave</h3>
                            <div class="dashboard-value" id="slBalance">12.0</div>
                            <div class="dashboard-subtitle">Days Available</div>
                        </div>
                        <div class="dashboard-card">
                            <h3>FRL Balance</h3>
                            <div class="dashboard-value" id="frlBalance">6.0</div>
                            <div class="dashboard-subtitle">Days Available</div>
                        </div>
                    </div>

                    <div class="alert alert-info mb-20">
                        <strong>Today's Duty:</strong> <span id="todayDutyTime">Loading...</span><br>
                        <strong>Next Duty:</strong> <span id="nextDutyTime">Loading...</span>
                    </div>

                    <div class="quick-actions mb-20">
                        <div class="action-btn touch-feedback" onclick="showPage('dutyChange')">
                            <div class="action-icon">üîÑ</div>
                            <div class="action-text">Duty Change</div>
                        </div>
                        <div class="action-btn touch-feedback" onclick="showPage('leaveApplication')">
                            <div class="action-icon">üèñÔ∏è</div>
                            <div class="action-text">Apply Leave</div>
                        </div>
                        <div class="action-btn touch-feedback" onclick="showPage('myRequests')">
                            <div class="action-icon">üìã</div>
                            <div class="action-text">My Requests</div>
                        </div>
                        <div class="action-btn touch-feedback" onclick="showPage('viewMyRoster')">
                            <div class="action-icon">üìÖ</div>
                            <div class="action-text">My Roster</div>
                        </div>
                    </div>

                    <div class="announcements" id="announcementsContainer">
                        <!-- Announcements will be loaded here -->
                    </div>
                </div>

                <!-- Duty Change Page -->
                <div id="dutyChangeContent" class="page-content hidden">
                    <div class="form-card">
                        <h2>Duty Change Request</h2>
                        
                        <div class="alert alert-warning mb-20">
                            Requests must be made at least 24 hours in advance.
                        </div>
                        
                        <form id="dutyChangeForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Change Date</label>
                                    <input type="date" id="changeDate" class="form-input" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Your Duty Time</label>
                                    <select id="changeDutyTime" class="form-input" required>
                                        <option value="">Select duty time</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Request To Staff</label>
                                    <select id="requestToStaff" class="form-input" required>
                                        <option value="">Select staff member</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Reason (Optional)</label>
                                    <textarea id="changeReason" class="form-input" 
                                              placeholder="Brief reason for duty change" rows="2"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <button type="submit" class="btn btn-success">Submit Request</button>
                                <button type="button" class="btn btn-danger mt-10" onclick="showPage('dashboard')">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Leave Application Page -->
                <div id="leaveApplicationContent" class="page-content hidden">
                    <div class="form-card">
                        <h2>Leave Application</h2>
                        
                        <div class="alert alert-info mb-20">
                            <strong>Rules:</strong><br>
                            ‚Ä¢ Sick Leave: 2+ hours before duty<br>
                            ‚Ä¢ FRL: 1+ hour before duty<br>
                            ‚Ä¢ No back dated applications
                        </div>
                        
                        <form id="leaveApplicationForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Leave Type</label>
                                    <select id="leaveType" class="form-input" required>
                                        <option value="">Select leave type</option>
                                        <option value="Sick Leave">Sick Leave</option>
                                        <option value="FRL">FRL</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Leave Date</label>
                                    <input type="date" id="leaveDate" class="form-input" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Duty Time</label>
                                    <select id="leaveDutyTime" class="form-input" required>
                                        <option value="">Select duty time</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Duration</label>
                                    <select id="leaveDuration" class="form-input" required>
                                        <option value="1">1 Day</option>
                                        <option value="0.5">Half Day</option>
                                        <option value="2">2 Days</option>
                                        <option value="3">3 Days</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Reason</label>
                                    <textarea id="leaveReason" class="form-input" 
                                              placeholder="Please provide reason for leave" 
                                              rows="3" required></textarea>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="alert" id="leaveRulesAlert">
                                    Select leave type, date and duty time to see rules
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <button type="submit" class="btn btn-success">Submit Application</button>
                                <button type="button" class="btn btn-danger mt-10" onclick="showPage('dashboard')">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- My Requests Page -->
                <div id="myRequestsContent" class="page-content hidden">
                    <div class="form-card">
                        <h2>My Requests</h2>
                        
                        <div id="myRequestsContainer">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>Loading requests...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- My Roster Page -->
                <div id="viewMyRosterContent" class="page-content hidden">
                    <div class="form-card">
                        <h2>My Duty Roster</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">View Month</label>
                                <input type="month" id="myRosterMonth" class="form-input" value="">
                            </div>
                        </div>
                        
                        <div class="form-row mb-20">
                            <button class="btn btn-primary" onclick="loadMyRoster()">Load Roster</button>
                        </div>
                        
                        <div id="myRosterContainer">
                            <!-- Roster will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settingsContent" class="page-content hidden">
                    <div class="form-card">
                        <h2>Settings</h2>
                        
                        <div class="form-row">
                            <button class="btn btn-primary" onclick="refreshData()">
                                ‚Üª Refresh All Data
                            </button>
                        </div>
                        
                        <div class="form-row">
                            <button class="btn btn-warning" onclick="clearLocalData()">
                                üóëÔ∏è Clear Local Data
                            </button>
                        </div>
                        
                        <div class="form-row">
                            <button class="btn btn-danger" onclick="logout()">
                                üëã Logout
                            </button>
                        </div>
                        
                        <div class="alert alert-info mt-20">
                            <strong>App Info</strong><br>
                            Version: 1.0.0<br>
                            Storage: <span id="storageStatus">Local</span><br>
                            Last Sync: <span id="lastSyncTime">Never</span>
                        </div>
                    </div>
                </div>

                <!-- Notifications Modal -->
                <div id="notificationsModal" class="modal-overlay hidden">
                    <div class="modal-content">
                        <button class="modal-close" onclick="hideModal('notificationsModal')">√ó</button>
                        <h2>Notifications</h2>
                        <div id="notificationsList">
                            <div class="no-data">
                                <div class="no-data-icon">üîî</div>
                                <p>No notifications</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Bar -->
            <div class="tab-bar">
                <button class="tab-item active" onclick="showPage('dashboard')">
                    <div class="tab-icon">üìä</div>
                    <div>Dashboard</div>
                </button>
                <button class="tab-item" onclick="showPage('dutyChange')">
                    <div class="tab-icon">üîÑ</div>
                    <div>Duty Change</div>
                </button>
                <button class="tab-item" onclick="showPage('leaveApplication')">
                    <div class="tab-icon">üèñÔ∏è</div>
                    <div>Leave</div>
                </button>
                <button class="tab-item" onclick="showPage('myRequests')">
                    <div class="tab-icon">üìã</div>
                    <div>Requests</div>
                </button>
                <button class="tab-item" onclick="showPage('settings')">
                    <div class="tab-icon">‚öôÔ∏è</div>
                    <div>Settings</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Swipe Navigation Areas -->
    <div class="swipe-area left" id="swipeLeft"></div>
    <div class="swipe-area right" id="swipeRight"></div>

    <script>
        // Global variables
        let currentUser = null;
        let users = [];
        let dutyRoster = {};
        let leaveBalances = {};
        let requests = [];
        let announcements = [];
        let currentPage = 'dashboard';

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        function initApp() {
            // Setup login
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Setup refresh button
            document.getElementById('refreshBtn').addEventListener('click', refreshData);
            
            // Setup notifications button
            document.getElementById('notificationsBtn').addEventListener('click', showNotifications);
            
            // Set minimum dates
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('changeDate').min = today;
            document.getElementById('leaveDate').min = today;
            document.getElementById('myRosterMonth').value = today.substring(0, 7);
            
            // Setup swipe navigation
            setupSwipeNavigation();
            
            // Check for existing session
            checkSession();
            
            // Setup online/offline detection
            setupConnectivity();
        }

        function setupSwipeNavigation() {
            let startX = 0;
            let startY = 0;
            const threshold = 50;
            
            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const diffX = endX - startX;
                const diffY = endY - startY;
                
                // Only horizontal swipes
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > threshold) {
                    if (diffX > 0) {
                        // Swipe right - go back
                        navigateBack();
                    } else {
                        // Swipe left - forward (if applicable)
                        navigateForward();
                    }
                }
            });
        }

        function navigateBack() {
            if (currentPage !== 'dashboard') {
                showPage('dashboard');
            }
        }

        function navigateForward() {
            // Implement forward navigation if needed
        }

        function setupConnectivity() {
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            
            function updateOnlineStatus() {
                const indicator = document.getElementById('offlineIndicator');
                if (!navigator.onLine) {
                    indicator.style.display = 'block';
                } else {
                    indicator.style.display = 'none';
                    // Sync data when coming back online
                    syncData();
                }
            }
            
            updateOnlineStatus();
        }

        function checkSession() {
            const session = localStorage.getItem('dutyMobileSession');
            if (session) {
                try {
                    const user = JSON.parse(session);
                    if (user.expiry > Date.now()) {
                        loginUser(user);
                    } else {
                        localStorage.removeItem('dutyMobileSession');
                    }
                } catch (e) {
                    localStorage.removeItem('dutyMobileSession');
                }
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorMsg = document.getElementById('errorMessage');
            
            if (!username || !password) {
                showError('Please enter both username and password');
                return;
            }
            
            // For demo, create a mock user
            const demoUsers = [
                { username: 'iru1', password: 'pass123', name: 'Irufan 1', RCNo: '001', Level: 'User' },
                { username: 'iru2', password: 'pass123', name: 'Irufan 2', RCNo: '002', Level: 'User' },
                { username: 'admin', password: 'admin123', name: 'Supervisor', RCNo: '999', Level: 'Supervisor' }
            ];
            
            const user = demoUsers.find(u => u.username === username && u.password === password);
            
            if (user) {
                const sessionData = {
                    username: user.username,
                    name: user.name,
                    rcNo: user.RCNo,
                    level: user.Level,
                    expiry: Date.now() + (8 * 60 * 60 * 1000)
                };
                
                localStorage.setItem('dutyMobileSession', JSON.stringify(sessionData));
                loginUser(sessionData);
            } else {
                showError('Invalid username or password');
            }
        }

        function showError(message) {
            const errorMsg = document.getElementById('errorMessage');
            errorMsg.textContent = message;
            errorMsg.style.display = 'block';
            
            setTimeout(() => {
                errorMsg.style.display = 'none';
            }, 3000);
        }

        function loginUser(userData) {
            currentUser = userData;
            
            // Update UI
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            document.getElementById('headerSubtitle').textContent = `Welcome, ${userData.name}`;
            
            // Load data
            loadAllData();
            
            // Update dashboard
            updateDashboard();
        }

        function loadAllData() {
            // Load from localStorage
            const savedRoster = localStorage.getItem('dutyRosterMobile');
            if (savedRoster) {
                dutyRoster = JSON.parse(savedRoster);
            } else {
                // Create demo roster
                createDemoRoster();
            }
            
            const savedBalances = localStorage.getItem('leaveBalancesMobile');
            if (savedBalances) {
                leaveBalances = JSON.parse(savedBalances);
            } else {
                createDemoBalances();
            }
            
            const savedRequests = localStorage.getItem('dutyRequestsMobile');
            if (savedRequests) {
                requests = JSON.parse(savedRequests);
            } else {
                requests = [];
            }
            
            const savedAnnouncements = localStorage.getItem('dutyAnnouncementsMobile');
            if (savedAnnouncements) {
                announcements = JSON.parse(savedAnnouncements);
            } else {
                createDemoAnnouncements();
            }
            
            // Update storage status
            updateStorageStatus();
        }

        function createDemoRoster() {
            const today = new Date();
            dutyRoster = {};
            
            for (let i = 0; i < 30; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];
                
                dutyRoster[dateStr] = {
                    'iru1': i % 3 === 0 ? '08:00-16:00' : i % 3 === 1 ? '16:00-00:00' : 'Off',
                    'iru2': i % 3 === 1 ? '08:00-16:00' : i % 3 === 2 ? '16:00-00:00' : 'Off'
                };
            }
            
            localStorage.setItem('dutyRosterMobile', JSON.stringify(dutyRoster));
        }

        function createDemoBalances() {
            leaveBalances = {
                'iru1': { SL: 12.0, FRL: 6.0 },
                'iru2': { SL: 10.5, FRL: 5.0 },
                'admin': { SL: 15.0, FRL: 8.0 }
            };
            
            localStorage.setItem('leaveBalancesMobile', JSON.stringify(leaveBalances));
        }

        function createDemoAnnouncements() {
            const today = new Date();
            announcements = [
                {
                    id: '1',
                    title: 'System Maintenance',
                    content: 'System will be down for maintenance on Saturday from 2 AM to 4 AM.',
                    priority: 'medium',
                    createdAt: today.toISOString(),
                    createdBy: 'Admin'
                },
                {
                    id: '2',
                    title: 'Important: New Policy',
                    content: 'Starting next month, all leave requests must be submitted 48 hours in advance.',
                    priority: 'high',
                    createdAt: new Date(today.getTime() - 86400000).toISOString(),
                    createdBy: 'Supervisor'
                }
            ];
            
            localStorage.setItem('dutyAnnouncementsMobile', JSON.stringify(announcements));
        }

        function updateStorageStatus() {
            const status = document.getElementById('storageStatus');
            const lastSync = document.getElementById('lastSyncTime');
            
            status.textContent = 'Local Storage';
            lastSync.textContent = new Date().toLocaleTimeString();
        }

        function updateDashboard() {
            if (!currentUser) return;
            
            // Update balances
            const balance = leaveBalances[currentUser.username] || { SL: 0, FRL: 0 };
            document.getElementById('slBalance').textContent = balance.SL.toFixed(1);
            document.getElementById('frlBalance').textContent = balance.FRL.toFixed(1);
            
            // Update today's duty
            const today = new Date().toISOString().split('T')[0];
            if (dutyRoster[today] && dutyRoster[today][currentUser.username]) {
                const duty = dutyRoster[today][currentUser.username];
                document.getElementById('todayDutyTime').textContent = duty === 'Off' ? 'Off Duty' : duty;
            } else {
                document.getElementById('todayDutyTime').textContent = 'Not Scheduled';
            }
            
            // Find next duty
            const tomorrow = new Date();
            for (let i = 1; i <= 7; i++) {
                tomorrow.setDate(tomorrow.getDate() + 1);
                const dateStr = tomorrow.toISOString().split('T')[0];
                if (dutyRoster[dateStr] && dutyRoster[dateStr][currentUser.username]) {
                    const duty = dutyRoster[dateStr][currentUser.username];
                    if (duty !== 'Off') {
                        document.getElementById('nextDutyTime').textContent = `${formatDate(dateStr)}: ${duty}`;
                        break;
                    }
                }
            }
            
            // Load announcements
            loadAnnouncements();
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function loadAnnouncements() {
            const container = document.getElementById('announcementsContainer');
            container.innerHTML = '';
            
            if (announcements.length === 0) {
                container.innerHTML = '<div class="no-data">No announcements</div>';
                return;
            }
            
            // Sort by date (newest first)
            const sortedAnnouncements = [...announcements].sort((a, b) => 
                new Date(b.createdAt) - new Date(a.createdAt)
            );
            
            sortedAnnouncements.forEach(ann => {
                const div = document.createElement('div');
                div.className = `announcement-card priority-${ann.priority}`;
                
                div.innerHTML = `
                    <div class="announcement-title">
                        üì¢ ${ann.title}
                    </div>
                    <div class="announcement-content">${ann.content}</div>
                    <div class="announcement-time">
                        By ${ann.createdBy} ‚Ä¢ ${formatTimeAgo(ann.createdAt)}
                    </div>
                `;
                
                container.appendChild(div);
            });
        }

        function formatTimeAgo(timestamp) {
            const now = new Date();
            const past = new Date(timestamp);
            const diffMs = now - past;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMins / 60);
            const diffDays = Math.floor(diffHours / 24);
            
            if (diffMins < 1) return 'just now';
            if (diffMins < 60) return `${diffMins}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            
            return past.toLocaleDateString();
        }

        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Update tab bar
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected page
            const page = document.getElementById(pageName + 'Content');
            if (page) {
                page.classList.remove('hidden');
                currentPage = pageName;
                
                // Update header
                document.getElementById('headerTitle').textContent = getPageTitle(pageName);
                
                // Activate corresponding tab
                const tab = document.querySelector(`.tab-item[onclick*="${pageName}"]`);
                if (tab) tab.classList.add('active');
                
                // Load page data
                switch(pageName) {
                    case 'dashboard':
                        updateDashboard();
                        break;
                    case 'dutyChange':
                        loadDutyChangeForm();
                        break;
                    case 'leaveApplication':
                        loadLeaveForm();
                        break;
                    case 'myRequests':
                        loadMyRequests();
                        break;
                    case 'viewMyRoster':
                        loadMyRoster();
                        break;
                }
            }
        }

        function getPageTitle(pageName) {
            const titles = {
                'dashboard': 'Dashboard',
                'dutyChange': 'Duty Change',
                'leaveApplication': 'Leave Application',
                'myRequests': 'My Requests',
                'viewMyRoster': 'My Roster',
                'settings': 'Settings'
            };
            return titles[pageName] || pageName;
        }

        function loadDutyChangeForm() {
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('changeDate').value = tomorrow.toISOString().split('T')[0];
            
            // Populate duty times
            const select = document.getElementById('changeDutyTime');
            select.innerHTML = '<option value="">Select duty time</option>';
            
            const dutyTimes = ['08:00-16:00', '16:00-00:00', '00:00-08:00'];
            dutyTimes.forEach(time => {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = time;
                select.appendChild(option);
            });
            
            // Populate staff dropdown
            const staffSelect = document.getElementById('requestToStaff');
            staffSelect.innerHTML = '<option value="">Select staff member</option>';
            
            const demoStaff = [
                { username: 'iru1', name: 'Irufan 1 (RC: 001)' },
                { username: 'iru2', name: 'Irufan 2 (RC: 002)' }
            ];
            
            demoStaff.forEach(staff => {
                if (staff.username !== currentUser.username) {
                    const option = document.createElement('option');
                    option.value = staff.username;
                    option.textContent = staff.name;
                    staffSelect.appendChild(option);
                }
            });
            
            // Setup form submission
            document.getElementById('dutyChangeForm').onsubmit = function(e) {
                e.preventDefault();
                submitDutyChange();
            };
        }

        function submitDutyChange() {
            const date = document.getElementById('changeDate').value;
            const dutyTime = document.getElementById('changeDutyTime').value;
            const toStaff = document.getElementById('requestToStaff').value;
            const reason = document.getElementById('changeReason').value;
            
            if (!date || !dutyTime || !toStaff) {
                alert('Please fill all required fields');
                return;
            }
            
            const request = {
                id: 'req_' + Date.now(),
                type: 'dutyChange',
                fromUsername: currentUser.username,
                fromName: currentUser.name,
                date: date,
                dutyTime: dutyTime,
                toUsername: toStaff,
                toName: toStaff === 'iru1' ? 'Irufan 1' : 'Irufan 2',
                reason: reason,
                status: 'pending',
                timestamp: new Date().toISOString()
            };
            
            requests.push(request);
            localStorage.setItem('dutyRequestsMobile', JSON.stringify(requests));
            
            alert('Duty change request submitted!');
            showPage('dashboard');
            
            // Reset form
            document.getElementById('dutyChangeForm').reset();
        }

        function loadLeaveForm() {
            // Set default date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('leaveDate').value = tomorrow.toISOString().split('T')[0];
            
            // Setup event listeners
            document.getElementById('leaveDate').addEventListener('change', updateLeaveRules);
            document.getElementById('leaveType').addEventListener('change', updateLeaveRules);
            document.getElementById('leaveDuration').addEventListener('change', updateLeaveRules);
            
            // Setup form submission
            document.getElementById('leaveApplicationForm').onsubmit = function(e) {
                e.preventDefault();
                submitLeaveApplication();
            };
            
            updateLeaveRules();
        }

        function updateLeaveRules() {
            const leaveType = document.getElementById('leaveType').value;
            const leaveDate = document.getElementById('leaveDate').value;
            const duration = document.getElementById('leaveDuration').value;
            const alertDiv = document.getElementById('leaveRulesAlert');
            
            if (!leaveType || !leaveDate) {
                alertDiv.className = 'alert alert-warning';
                alertDiv.textContent = 'Please select leave type and date';
                return;
            }
            
            const balance = leaveBalances[currentUser.username] || { SL: 0, FRL: 0 };
            const available = leaveType === 'Sick Leave' ? balance.SL : balance.FRL;
            
            if (parseFloat(duration) > available) {
                alertDiv.className = 'alert alert-danger';
                alertDiv.textContent = `Insufficient balance! Available: ${available} days, Requested: ${duration} days`;
            } else {
                alertDiv.className = 'alert alert-success';
                alertDiv.textContent = `‚úì Balance available: ${available} days`;
            }
        }

        function submitLeaveApplication() {
            const leaveType = document.getElementById('leaveType').value;
            const date = document.getElementById('leaveDate').value;
            const duration = parseFloat(document.getElementById('leaveDuration').value);
            const reason = document.getElementById('leaveReason').value;
            
            if (!leaveType || !date || !duration || !reason) {
                alert('Please fill all required fields');
                return;
            }
            
            const request = {
                id: 'req_' + Date.now(),
                type: 'leave',
                leaveType: leaveType,
                fromUsername: currentUser.username,
                fromName: currentUser.name,
                date: date,
                duration: duration,
                reason: reason,
                status: 'pending',
                timestamp: new Date().toISOString()
            };
            
            requests.push(request);
            localStorage.setItem('dutyRequestsMobile', JSON.stringify(requests));
            
            alert('Leave application submitted!');
            showPage('dashboard');
            
            // Reset form
            document.getElementById('leaveApplicationForm').reset();
        }

        function loadMyRequests() {
            const container = document.getElementById('myRequestsContainer');
            container.innerHTML = '';
            
            const myReqs = requests.filter(req => req.fromUsername === currentUser.username);
            
            if (myReqs.length === 0) {
                container.innerHTML = '<div class="no-data">No requests found</div>';
                return;
            }
            
            // Sort by timestamp (newest first)
            myReqs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            let html = '<div class="table-container"><table>';
            html += '<thead><tr><th>Type</th><th>Date</th><th>Status</th></tr></thead><tbody>';
            
            myReqs.forEach(req => {
                const statusClass = `status-${req.status}`;
                
                html += `<tr>
                    <td>${req.type === 'dutyChange' ? 'Duty Change' : req.leaveType}</td>
                    <td>${req.date}</td>
                    <td><span class="status-badge ${statusClass}">${req.status}</span></td>
                </tr>`;
            });
            
            html += '</tbody></table></div>';
            
            container.innerHTML = html;
        }

        function loadMyRoster() {
            const container = document.getElementById('myRosterContainer');
            const monthInput = document.getElementById('myRosterMonth').value;
            
            if (!monthInput) {
                container.innerHTML = '<div class="alert alert-warning">Please select a month</div>';
                return;
            }
            
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Loading roster...</p></div>';
            
            setTimeout(() => {
                const [year, month] = monthInput.split('-');
                const startDate = new Date(year, month - 1, 1);
                const endDate = new Date(year, month, 0);
                
                let html = '<div class="table-container"><table>';
                html += '<thead><tr><th>Date</th><th>Day</th><th>Duty Time</th><th>Status</th></tr></thead><tbody>';
                
                const today = new Date().toISOString().split('T')[0];
                
                for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                    const dateStr = d.toISOString().split('T')[0];
                    const dayName = d.toLocaleDateString('en-US', { weekday: 'short' });
                    
                    let dutyTime = 'Not Scheduled';
                    let statusClass = '';
                    let statusText = '';
                    
                    if (dutyRoster[dateStr] && dutyRoster[dateStr][currentUser.username]) {
                        dutyTime = dutyRoster[dateStr][currentUser.username];
                        if (dutyTime === 'Off') {
                            statusClass = 'status-pending';
                            statusText = 'Off';
                        } else {
                            statusClass = dateStr < today ? 'status-approved' : 'status-pending';
                            statusText = dateStr < today ? 'Completed' : 'Scheduled';
                        }
                    }
                    
                    const isToday = dateStr === today;
                    const rowStyle = isToday ? 'style="background-color: #fff3cd;"' : '';
                    
                    html += `<tr ${rowStyle}>
                        <td>${dateStr}${isToday ? ' (Today)' : ''}</td>
                        <td>${dayName}</td>
                        <td>${dutyTime}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    </tr>`;
                }
                
                html += '</tbody></table></div>';
                
                container.innerHTML = html;
            }, 500);
        }

        function refreshData() {
            // Show loading
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = '<div class="loading"><div class="spinner"></div><p>Refreshing data...</p></div>';
            
            setTimeout(() => {
                loadAllData();
                updateDashboard();
                showPage(currentPage);
                alert('Data refreshed successfully!');
            }, 1000);
        }

        function syncData() {
            // This function would sync with a server
            console.log('Syncing data with server...');
            updateStorageStatus();
        }

        function clearLocalData() {
            if (confirm('Are you sure you want to clear all local data? This will log you out.')) {
                localStorage.clear();
                location.reload();
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('dutyMobileSession');
                location.reload();
            }
        }

        function showNotifications() {
            showModal('notificationsModal');
            
            const list = document.getElementById('notificationsList');
            list.innerHTML = '';
            
            // Demo notifications
            const notifications = [
                { id: 1, text: 'Your duty change request was approved', time: '2 hours ago', read: false },
                { id: 2, text: 'New announcement: System Maintenance', time: '1 day ago', read: true },
                { id: 3, text: 'Leave balance updated', time: '3 days ago', read: true }
            ];
            
            if (notifications.length === 0) {
                list.innerHTML = '<div class="no-data"><div class="no-data-icon">üîî</div><p>No notifications</p></div>';
                return;
            }
            
            notifications.forEach(notif => {
                const div = document.createElement('div');
                div.className = `announcement-card ${!notif.read ? 'priority-high' : ''}`;
                div.style.marginBottom = '10px';
                
                div.innerHTML = `
                    <div class="announcement-content">${notif.text}</div>
                    <div class="announcement-time">${notif.time}</div>
                `;
                
                list.appendChild(div);
            });
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });
        });

        // Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(
                    function(registration) {
                        console.log('ServiceWorker registration successful');
                    },
                    function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    }
                );
            });
        }

        // Install prompt for PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button if not already installed
            if (!window.matchMedia('(display-mode: standalone)').matches) {
                showInstallPrompt();
            }
        });

        function showInstallPrompt() {
            // You can add an install button to your UI here
            console.log('App can be installed');
        }

        // Fullscreen for iOS
        if (navigator.standalone === false) {
            // Device is in browser
            document.body.classList.add('browser-mode');
        }
    </script>
</body>
</html>
